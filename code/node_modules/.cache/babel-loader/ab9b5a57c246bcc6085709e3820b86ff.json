{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  login: {\n    accessToken: null,\n    userId: 0,\n    userName: '',\n    errorMessage: null,\n    loginMessage: null,\n    loggedoutMessage: null\n  }\n};\nexport const user = createSlice({\n  name: 'user',\n  initialState: initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      const {\n        accessToken\n      } = action.payload;\n      console.log(`Access Token: ${accessToken}`);\n      state.login.accessToken = accessToken;\n    },\n    setUserId: (state, action) => {\n      const {\n        userId\n      } = action.payload;\n      console.log(`User Id: ${userId}`);\n      state.login.userId = userId;\n    },\n    setUserName: (state, action) => {\n      const {\n        userName\n      } = action.payload;\n      console.log(`username: ${userName}`);\n      state.login.userName = userName;\n    },\n    setErrorMessage: (state, action) => {\n      const {\n        errorMessage\n      } = action.payload;\n      console.log(`Error Message: ${errorMessage}`);\n      state.login.errorMessage = errorMessage;\n    },\n    setLoginMessage: (state, action) => {\n      const {\n        loginMessage\n      } = action.payload;\n      console.log(`Secret Message: ${loginMessage}`);\n      state.login.loginMessage = loginMessage;\n    },\n    setLoggedoutMessage: (state, action) => {\n      const {\n        loggedoutMessage\n      } = action.payload;\n      console.log(`You are logged out: ${loggedoutMessage}`);\n      state.login.loggedoutMessage = loggedoutMessage;\n    }\n  }\n});\nexport const login = (name, password) => {\n  // const LOGIN_URL = 'http://localhost:9001/sessions';\n  const LOGIN_URL = 'https://yogajuristen.herokuapp.com/sessions';\n  return dispatch => {\n    fetch(LOGIN_URL, {\n      method: 'POST',\n      body: JSON.stringify({\n        name,\n        password\n      }),\n      headers: {\n        'content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      } else {\n        return res.text().then(json => {\n          throw new Error(json);\n        });\n      }\n    }).then(json => {\n      dispatch(user.actions.setAccessToken({\n        accessToken: json.accessToken\n      }));\n      dispatch(user.actions.setUserId({\n        userId: json.userId\n      }));\n      dispatch(user.actions.setUserName({\n        userName: name\n      }));\n      dispatch(user.actions.setErrorMessage({\n        errorMessage: json.message\n      }));\n    }).catch(err => {\n      dispatch(user.actions.logout());\n      dispatch(user.actions.setErrorMessage({\n        errorMessage: err\n      }));\n    });\n  };\n};\nexport const getLoginMessage = () => {\n  // const USERS_URL = 'http://localhost:9001/users';\n  const USERS_URL = 'https://yogajuristen.herokuapp.com/users';\n  return (dispatch, getState) => {\n    const accessToken = getState().user.login.accessToken;\n    const userId = getState().user.login.userId;\n    fetch(`${USERS_URL}/${userId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: accessToken\n      }\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n\n      throw 'Please, try again.';\n    }).then(json => {\n      dispatch(user.actions.setLoginMessage({\n        loginMessage: JSON.stringify(json)\n      }));\n    }).catch(err => {\n      dispatch(user.actions.setErrorMessage({\n        errorMessage: err\n      }));\n    });\n  };\n};\nexport const logout = () => {\n  return dispatch => {\n    dispatch(user.actions.setLoginMessage({\n      LogInMessage: null\n    }));\n    dispatch(user.actions.setErrorMessage({\n      errorMessage: null\n    }));\n    dispatch(user.actions.setAccessToken({\n      accessToken: null\n    }));\n    dispatch(user.actions.setUserId({\n      userId: 0\n    }));\n    dispatch(user.actions.setUserName({\n      userName: ''\n    }));\n    dispatch(user.actions.setLoggedoutMessage({\n      loggedoutMessage: true\n    }));\n  };\n};","map":{"version":3,"sources":["/Users/josephine/Desktop/myproject/yogajuristen-frontend/code/src/reducers/user.js"],"names":["createSlice","initialState","login","accessToken","userId","userName","errorMessage","loginMessage","loggedoutMessage","user","name","reducers","setAccessToken","state","action","payload","console","log","setUserId","setUserName","setErrorMessage","setLoginMessage","setLoggedoutMessage","password","LOGIN_URL","dispatch","fetch","method","body","JSON","stringify","headers","then","res","ok","json","text","Error","actions","message","catch","err","logout","getLoginMessage","USERS_URL","getState","Authorization","LogInMessage"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nconst initialState = {\n  login: {\n    accessToken: null,\n    userId: 0,\n    userName: '',\n    errorMessage: null,\n    loginMessage: null,\n    loggedoutMessage: null,\n  },\n};\n\nexport const user = createSlice({\n  name: 'user',\n  initialState: initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      const { accessToken } = action.payload;\n      console.log(`Access Token: ${accessToken}`);\n      state.login.accessToken = accessToken;\n    },\n    setUserId: (state, action) => {\n      const { userId } = action.payload;\n      console.log(`User Id: ${userId}`);\n      state.login.userId = userId;\n    },\n    setUserName: (state, action) => {\n      const { userName } = action.payload;\n      console.log(`username: ${userName}`);\n      state.login.userName = userName;\n    },\n    setErrorMessage: (state, action) => {\n      const { errorMessage } = action.payload;\n      console.log(`Error Message: ${errorMessage}`);\n      state.login.errorMessage = errorMessage;\n    },\n    setLoginMessage: (state, action) => {\n      const { loginMessage } = action.payload;\n      console.log(`Secret Message: ${loginMessage}`);\n      state.login.loginMessage = loginMessage;\n    },\n    setLoggedoutMessage: (state, action) => {\n      const { loggedoutMessage } = action.payload;\n      console.log(`You are logged out: ${loggedoutMessage}`);\n      state.login.loggedoutMessage = loggedoutMessage;\n    },\n  },\n});\n\nexport const login = (name, password) => {\n  // const LOGIN_URL = 'http://localhost:9001/sessions';\n  const LOGIN_URL = 'https://yogajuristen.herokuapp.com/sessions'\n\n  return (dispatch) => {\n    fetch(LOGIN_URL, {\n      method: 'POST',\n      body: JSON.stringify({ name, password }),\n      headers: { 'content-Type': 'application/json' },\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          return res.text().then((json) => { throw new Error(json) })\n        }\n      })\n      .then((json) => {\n        dispatch(\n          user.actions.setAccessToken({\n            accessToken: json.accessToken\n          })\n        );\n        dispatch(user.actions.setUserId({ userId: json.userId }));\n        dispatch(\n          user.actions.setUserName({\n            userName: name\n          })\n        );\n        dispatch(user.actions.setErrorMessage({ errorMessage: json.message }))\n      })\n      .catch((err) => {\n        dispatch(user.actions.logout());\n        dispatch(user.actions.setErrorMessage({ errorMessage: err }));\n      });\n  };\n};\n\nexport const getLoginMessage = () => {\n  // const USERS_URL = 'http://localhost:9001/users';\n\n  const USERS_URL = 'https://yogajuristen.herokuapp.com/users'\n\n  return (dispatch, getState) => {\n    const accessToken = getState().user.login.accessToken;\n    const userId = getState().user.login.userId;\n    fetch(`${USERS_URL}/${userId}`, {\n      method: 'GET',\n\n      headers: { Authorization: accessToken },\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        throw 'Please, try again.';\n      })\n      .then((json) => {\n        dispatch(\n          user.actions.setLoginMessage({ loginMessage: JSON.stringify(json) })\n        );\n      })\n      .catch((err) => {\n        dispatch(user.actions.setErrorMessage({ errorMessage: err }));\n      });\n  };\n};\n\nexport const logout = () => {\n  return (dispatch) => {\n    dispatch(user.actions.setLoginMessage({ LogInMessage: null }));\n    dispatch(user.actions.setErrorMessage({ errorMessage: null }));\n    dispatch(user.actions.setAccessToken({ accessToken: null }));\n    dispatch(user.actions.setUserId({ userId: 0 }));\n    dispatch(user.actions.setUserName({ userName: '' }));\n\n    dispatch(user.actions.setLoggedoutMessage({ loggedoutMessage: true }));\n  };\n};\n"]},"metadata":{},"sourceType":"module"}