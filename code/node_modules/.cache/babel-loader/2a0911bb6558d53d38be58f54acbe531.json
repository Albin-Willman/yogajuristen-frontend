{"ast":null,"code":"import _slicedToArray from\"/Users/josephine/Desktop/myproject/yogajuristen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/josephine/Desktop/myproject/yogajuristen-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject3(){var data=_taggedTemplateLiteral([\"\\ncolor: white; \\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  padding: 0.5em;\\n  height: 3rem;\\n  font-size: 1rem; \\n  color:  grey; \\n  background: #ebedf9;\\n  \\n  border-radius: 10px;\\n  &:hover {\\n    background: #b4bb72;\\n    color: white; \\n    \\n  }\\n   \\n  @media(min-width: 668px) {\\n    font-size: 1.2rem;\\n   \\n\\n  }\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  padding: 0.5em;\\n  height: 3rem;\\n  font-size: 1rem; \\n  color:  darkblue;\\n  background: #ebedf9;\\n  border: none;\\n  border-radius: 10px;\\n  margin: 16px; \\n  @media(min-width: 668px) {\\n    font-size: 1.2rem;\\n   \\n  }\\n    \\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState}from'react';import styled from'styled-components';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{user,login}from'../reducers/user';// const URL = 'http://localhost:9001/users'\nvar URL='https://yogajuristen.herokuapp.com/users';var Input=styled.input(_templateObject());var Button=styled.button(_templateObject2());var Error=styled.h4(_templateObject3());export var SignUp=function SignUp(){var dispatch=useDispatch();var accessToken=useSelector(function(store){return store.user.login.accessToken;});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showSummary=_useState10[0],setShowSummary=_useState10[1];var handleSignup=function handleSignup(event){event.preventDefault();return function(){fetch(URL,{method:'POST',body:JSON.stringify({name:name,email:email,password:password}),headers:{'content-Type':'application/json'}}).then(function(res){if(res.ok){setShowSummary(true);return res.json();}else{throw new Error('Unable to sign up');}}).then(function(json){dispatch(user.actions.setAccessToken({accessToken:json.accessToken}));dispatch(user.actions.setUserId({userId:json.userId}));}).catch(function(err){setErrorMessage('Username/email is already registered.',err);dispatch(user.actions.setErrorMessage({errorMessage:err}));});};};return/*#__PURE__*/React.createElement(\"div\",null,!showSummary&&/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return dispatch(handleSignup(e));}},/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(Input,{placeholder:\"Namn\",value:name,onChange:function onChange(event){return setName(event.target.value);},required:true})),/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(Input,{placeholder:\"Email\",type:\"email\",value:email,onChange:function onChange(event){return setEmail(event.target.value);},required:true})),/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(Input,{placeholder:\"L\\xF6senord\",type:\"password\",value:password,required:true,onChange:function onChange(event){return setPassword(event.target.value);}})),/*#__PURE__*/React.createElement(Button,{type:\"submit\"},\"Registrera\"),errorMessage&&/*#__PURE__*/React.createElement(Error,null,errorMessage)),showSummary&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"You are now signed up! View \",/*#__PURE__*/React.createElement(Link,{to:\"/Members\"},\"members page\"))));};","map":{"version":3,"sources":["/Users/josephine/Desktop/myproject/yogajuristen-frontend/src/components/SignUp.js"],"names":["React","useState","styled","Link","useDispatch","useSelector","user","login","URL","Input","input","Button","button","Error","h4","SignUp","dispatch","accessToken","store","name","setName","email","setEmail","password","setPassword","errorMessage","setErrorMessage","showSummary","setShowSummary","handleSignup","event","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","ok","json","actions","setAccessToken","setUserId","userId","catch","err","e","target","value"],"mappings":"kxCAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,CAAeC,KAAf,KAA4B,kBAA5B,CAEA;AACA,GAAMC,CAAAA,GAAG,CAAG,0CAAZ,CAGA,GAAMC,CAAAA,KAAK,CAAGP,MAAM,CAACQ,KAAV,mBAAX,CAgBA,GAAMC,CAAAA,MAAM,CAAGT,MAAM,CAACU,MAAV,oBAAZ,CAqBA,GAAMC,CAAAA,KAAK,CAAGX,MAAM,CAACY,EAAV,oBAAX,CAIA,MAAO,IAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CAC1B,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,CAAAA,WAAW,CAAGZ,WAAW,CAAC,SAACa,KAAD,QAAWA,CAAAA,KAAK,CAACZ,IAAN,CAAWC,KAAX,CAAiBU,WAA5B,EAAD,CAA/B,CAF0B,cAIFhB,QAAQ,CAAC,EAAD,CAJN,wCAInBkB,IAJmB,eAIbC,OAJa,8BAKAnB,QAAQ,CAAC,EAAD,CALR,yCAKnBoB,KALmB,eAKZC,QALY,8BAMMrB,QAAQ,CAAC,EAAD,CANd,yCAMnBsB,QANmB,eAMTC,WANS,8BAOcvB,QAAQ,CAAC,EAAD,CAPtB,yCAOnBwB,YAPmB,eAOLC,eAPK,8BAQYzB,QAAQ,CAAC,KAAD,CARpB,0CAQnB0B,WARmB,gBAQNC,cARM,gBAU1B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9BA,KAAK,CAACC,cAAN,GACA,MAAO,WAAM,CACXC,KAAK,CAACxB,GAAD,CAAM,CACTyB,MAAM,CAAE,MADC,CAETC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEjB,IAAI,CAAJA,IAAF,CAAQE,KAAK,CAALA,KAAR,CAAeE,QAAQ,CAARA,QAAf,CAAf,CAFG,CAGTc,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAHA,CAAN,CAAL,CAKGC,IALH,CAKQ,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,EAAR,CAAY,CACVZ,cAAc,CAAC,IAAD,CAAd,CACA,MAAOW,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACD,CAHD,IAGO,CACL,KAAM,IAAI5B,CAAAA,KAAJ,CAAU,mBAAV,CAAN,CACD,CACF,CAZH,EAcGyB,IAdH,CAcQ,SAACG,IAAD,CAAU,CACdzB,QAAQ,CACNV,IAAI,CAACoC,OAAL,CAAaC,cAAb,CAA4B,CAC1B1B,WAAW,CAAEwB,IAAI,CAACxB,WADQ,CAA5B,CADM,CAAR,CAKAD,QAAQ,CAACV,IAAI,CAACoC,OAAL,CAAaE,SAAb,CAAuB,CAAEC,MAAM,CAAEJ,IAAI,CAACI,MAAf,CAAvB,CAAD,CAAR,CACD,CArBH,EAuBGC,KAvBH,CAuBS,SAACC,GAAD,CAAS,CACdrB,eAAe,CAAC,uCAAD,CAA0CqB,GAA1C,CAAf,CACA/B,QAAQ,CAACV,IAAI,CAACoC,OAAL,CAAahB,eAAb,CAA6B,CAAED,YAAY,CAAEsB,GAAhB,CAA7B,CAAD,CAAR,CACD,CA1BH,EA2BD,CA5BD,CA6BD,CA/BD,CAiCA,mBACE,+BACG,CAACpB,WAAD,eACC,4BAAM,QAAQ,CAAE,kBAACqB,CAAD,QAAOhC,CAAAA,QAAQ,CAACa,YAAY,CAACmB,CAAD,CAAb,CAAf,EAAhB,eACE,8CAEE,oBAAC,KAAD,EACE,WAAW,CAAC,MADd,CAEE,KAAK,CAAE7B,IAFT,CAGE,QAAQ,CAAE,kBAACW,KAAD,QAAWV,CAAAA,OAAO,CAACU,KAAK,CAACmB,MAAN,CAAaC,KAAd,CAAlB,EAHZ,CAIE,QAAQ,KAJV,EAFF,CADF,cAUE,8CAEE,oBAAC,KAAD,EACE,WAAW,CAAC,OADd,CAEE,IAAI,CAAC,OAFP,CAGE,KAAK,CAAE7B,KAHT,CAIE,QAAQ,CAAE,kBAACS,KAAD,QAAWR,CAAAA,QAAQ,CAACQ,KAAK,CAACmB,MAAN,CAAaC,KAAd,CAAnB,EAJZ,CAKE,QAAQ,KALV,EAFF,CAVF,cAoBE,8CAEE,oBAAC,KAAD,EACE,WAAW,CAAC,aADd,CAEE,IAAI,CAAC,UAFP,CAGE,KAAK,CAAE3B,QAHT,CAIE,QAAQ,KAJV,CAKE,QAAQ,CAAE,kBAACO,KAAD,QAAWN,CAAAA,WAAW,CAACM,KAAK,CAACmB,MAAN,CAAaC,KAAd,CAAtB,EALZ,EAFF,CApBF,cA8BE,oBAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,eA9BF,CA+BGzB,YAAY,eAAI,oBAAC,KAAD,MAAQA,YAAR,CA/BnB,CAFJ,CAoCGE,WAAW,eACV,4CACE,yEAC8B,oBAAC,IAAD,EAAM,EAAE,CAAC,UAAT,iBAD9B,CADF,CArCJ,CADF,CA+CD,CA1FM","sourcesContent":["import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { user, login } from '../reducers/user';\n\n// const URL = 'http://localhost:9001/users'\nconst URL = 'https://yogajuristen.herokuapp.com/users'\n\n\nconst Input = styled.input`\n  padding: 0.5em;\n  height: 3rem;\n  font-size: 1rem; \n  color:  darkblue;\n  background: #ebedf9;\n  border: none;\n  border-radius: 10px;\n  margin: 16px; \n  @media(min-width: 668px) {\n    font-size: 1.2rem;\n   \n  }\n    \n`;\n\nconst Button = styled.button`\n  padding: 0.5em;\n  height: 3rem;\n  font-size: 1rem; \n  color:  grey; \n  background: #ebedf9;\n  \n  border-radius: 10px;\n  &:hover {\n    background: #b4bb72;\n    color: white; \n    \n  }\n   \n  @media(min-width: 668px) {\n    font-size: 1.2rem;\n   \n\n  }\n`\n\nconst Error = styled.h4`\ncolor: white; \n`\n\nexport const SignUp = () => {\n  const dispatch = useDispatch();\n  const accessToken = useSelector((store) => store.user.login.accessToken);\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [showSummary, setShowSummary] = useState(false);\n\n  const handleSignup = (event) => {\n    event.preventDefault();\n    return () => {\n      fetch(URL, {\n        method: 'POST',\n        body: JSON.stringify({ name, email, password }),\n        headers: { 'content-Type': 'application/json' },\n      })\n        .then((res) => {\n          if (res.ok) {\n            setShowSummary(true);\n            return res.json();\n          } else {\n            throw new Error('Unable to sign up');\n          }\n        })\n\n        .then((json) => {\n          dispatch(\n            user.actions.setAccessToken({\n              accessToken: json.accessToken,\n            })\n          );\n          dispatch(user.actions.setUserId({ userId: json.userId }));\n        })\n\n        .catch((err) => {\n          setErrorMessage('Username/email is already registered.', err);\n          dispatch(user.actions.setErrorMessage({ errorMessage: err }));\n        });\n    };\n  };\n\n  return (\n    <div>\n      {!showSummary && (\n        <form onSubmit={(e) => dispatch(handleSignup(e))}>\n          <label>\n\n            <Input\n              placeholder=\"Namn\"\n              value={name}\n              onChange={(event) => setName(event.target.value)}\n              required\n            />\n          </label>\n          <label>\n\n            <Input\n              placeholder=\"Email\"\n              type='email'\n              value={email}\n              onChange={(event) => setEmail(event.target.value)}\n              required\n            />\n          </label>\n          <label>\n\n            <Input\n              placeholder=\"Lösenord\"\n              type='password'\n              value={password}\n              required\n              onChange={(event) => setPassword(event.target.value)}\n            />\n          </label>\n          <Button type='submit'>Registrera</Button>\n          {errorMessage && <Error>{errorMessage}</Error>}\n        </form>\n      )}\n      {showSummary && (\n        <div>\n          <p>\n            You are now signed up! View <Link to='/Members'>members page</Link>\n          </p>\n        </div>\n      )}\n\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}